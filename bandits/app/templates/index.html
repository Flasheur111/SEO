<!DOCTYPE html>
<html lang="{% block html_lang %}en{% endblock %}">
    <head>
        <title>{% block title %}Les Bandits Manchots{% endblock %}</title>

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
        <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='custom.css') }}">

        <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
        <script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
    </head>
    <body style="height:100%">
        {% if rand <= 50 %}
        <h1>Keyword : {{ keyword }}</h1>
        <h2 style="background-color:green;">Exploration</h2>
        {% else %}
        <h2 style="background-color:red;">Exploitation</h2>
        {% endif %}

        <ul style="list-style-type: none; padding-left: 0px; margin-left: 0px;">
            {% for (SourceUrl, MediaUrl, Title) in images %}
            <li class="col-sm-3">
            <a href="{{ MediaUrl }}" onClick="updateClick('{{ SourceUrl}}', '{{ MediaUrl }}', '{{ Title }}')">
                <img src="{{ SourceUrl }}" class="img-responsive"/>
                <figcaption>{{ Title }}</figcaption></a>
            </li>
            {% endfor %}
        </ul>
        <script type="text/javascript">
            function updateClick(SourceUrl, MediaUrl, Title)
            {
	            var xmlhttp=new XMLHttpRequest();
                xmlhttp.open("POST","images/add" ,true);
                xmlhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
                xmlhttp.send(JSON.stringify({ 'MediaUrl' : MediaUrl, 'SourceUrl' : SourceUrl, 'Title' : Title}));
            }
        </script>
    </body>
</html>
