<!DOCTYPE html>
<html lang="{% block html_lang %}en{% endblock %}">
    <head>
        <title>{% block title %}Les Bandits Manchots{% endblock %}</title>

        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/thumbnail-gallery.css') }}">
        <script type="text/javascript" src="{{ url_for('static', filename='js/jquery.js') }}"></script>
        <script type="text/javascript" src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
    </head>
    <body>
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                {% if rand <= 10 %}
                     <h1 class="page-header">Keyword : {{ keyword }}</h1>
                    <h2 style="background-color:green;">Exploration</h2>
                {% else %}
                    <h2 style="background-color:red;">Exploitation</h2>
                {% endif %}
                </div>

            {% for (SourceUrl, MediaUrl, Title) in images %}
            <div class="col-lg-3 col-md-4 col-xs-6 thumb">
                <a class="thumbnail" href="{{ MediaUrl }}" onClick="updateClick('{{ SourceUrl}}', '{{ MediaUrl }}', '{{ Title }}')">
                    <img style="width:300px; height: 300px;" class="img-responsive" src="{{ SourceUrl }}"/>
                    <figcaption>{{ Title }}</figcaption>
                </a>
            </div>
            {% endfor %}
            </div>
        </div>
        <script type="text/javascript">
            function updateClick(SourceUrl, MediaUrl, Title)
            {
	            var xmlhttp=new XMLHttpRequest();
                xmlhttp.open("POST","images/add" ,true);
                xmlhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
                xmlhttp.send(JSON.stringify({ 'MediaUrl' : MediaUrl, 'SourceUrl' : SourceUrl, 'Title' : Title}));
            }
        </script>
    </body>
</html>
