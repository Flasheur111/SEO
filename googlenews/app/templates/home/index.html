{% extends "home/layout.html" %}
{% block body %}
    <!-- DropDownlist of all the categories -->
    <label for="categories">Categories: </label>
    <select name="categories" id="categories" onchange="onCategoryChange(this);">
        <option value="">All</option>
    {% for category in categories %}
        <option value="{{ category.keywords }}">{{ category.title }}</option>
    {% else %}
        <option value="No Category Found">
    {% endfor %}
    </select>

    <!-- Printing all the key words for the category selected -->
    <ul id="keywords">
    {% for key_word in key_words %}
        <li class="keyword">{{ key_word }}</li>
    {% else %}
        <li class="keyword">No keyword found</li>
    {% endfor %}
    </ul>

    <!-- Form for posting a news -->
    <form method="post" name="post_news" id="form_news">
        <input type="text" placeholder="Title" name="title"/ id="form_news_title">
        <input type="file" accept="image/*" name="image" id="form_news_image"/>
        <input type="submit" id="form_news_submit"/>
    </form>
    <textarea name="content" form="form_news" id="form_news_content">
        Enter the content here....
    </textarea>

{% endblock %}
<script type="text/javascript">
    function onCategoryChange(opt) {
        var keywords = opt.attr('value');

        var keywords_html = document.getElementById('keywords');
        keywords_html.deleteContents();

        for (var i = 0; i < keywords.count; ++i) {
            var keyword_html = document.createElement('li');
            keyword_html.addClass('keyword');
            keyword_html.appendChild(document.createTextNode(keywords[i]));
            keywords_html.appendChild(keyword_html);
        }
        keywords_html.createElement('li');
    }
</script>