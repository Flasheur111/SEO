{% extends "home/layout.html" %}
{% block body %}
    <!-- DropDownlist of all the categories -->
    <label for="categories">Categories: </label>
    <select name="categories" id="categories" onchange="onCategoryChange(this);">
    {% for category in categories %}
        <option value="{{ category }}">{{ category }}</option>
    {% endfor %}
    </select>

    <!-- Printing all the key words for the category selected -->
    <div id="keywords">
        <ul id="keywords_title">
        {% for keyword in keywords_title %}
            <li class="keyword">{{ keyword }}</li>
        {% else %}
            <li class="keyword">No keyword found</li>
        {% endfor %}
        </ul>

        <ul id="keywords_content">
        {% for keyword in keywords_content %}
            <li class="keyword">{{ keyword }}</li>
        {% else %}
            <li class="keyword">No keyword found</li>
        {% endfor %}
        </ul>
    </div>

    <!-- Form for posting a news -->
    <form method="post" name="post_news" id="form_news">
        <input type="text" placeholder="Title" name="title"/ id="form_news_title">
        <input type="file" accept="image/*" name="image" id="form_news_image"/>
        <input type="submit" id="form_news_submit"/>
    </form>
    <textarea name="content" form="form_news" id="form_news_content">
        Enter the content here....
    </textarea>

{% endblock %}
<script type="text/javascript">
    function onCategoryChange(opt) {
        var keywords = opt.attr('value');

        var keywords_title_html = document.getElementById('keywords_title');
        var keywords_content_html = document.getElementById('keywords_content');
        keywords_title_html.deleteContents();
        keywords_content_html.deleteContents();

        for (var i = 0; i < keywords.count; ++i) {
            var keyword_html = document.createElement('li');
            keyword_html.addClass('keyword');
            keyword_html.appendChild(document.createTextNode(keywords[i]));
            keywords_title_html.appendChild(keyword_html);
        }
        for (var i = 0; i < keywords.count; ++i) {
            var keyword_html = document.createElement('li');
            keyword_html.addClass('keyword');
            keyword_html.appendChild(document.createTextNode(keywords[i]));
            keywords_title_html.appendChild(keyword_html);
        }
        keywords_html.createElement('li');
    }
</script>